%h2 Create Collection
= form_tag({controller: 'collections', action: 'web_create_collection'}, method: 'post', :id => 'create_collection_form') do
  = label_tag :collection_name, 'Collection Name:'
  = text_field_tag :collection_name, nil, required: true
  = label_tag :collection_title, 'Collection Title:'
  = text_field_tag :collection_title, nil, required: true
  = label_tag :licence_id, 'Licence'
  = select_tag :licence_id, options_for_select(@licences.map {|l| [l.name, l.id]}), include_blank: true

  %h2 Additional Metadata
  See #{link_to 'searchable fields', catalog_searchable_fields_path} for suggestions

  #additional_metadata

  .new_metadata_btns{:id => 'new_metadata_btns'}
    %br
    = button_tag 'Add Metadata Field', :id =>'add_metadata_btn', type: 'button'
    = link_to 'Cancel', collections_path
    = submit_tag 'Create'


= render 'shared/nectar_attribution'

:javascript
  $("#add_metadata_btn").click(function(){
    var key_field = "<label>Key:</label><input type='text' name='additional_key[]' class='metadata_field'/>";
    var value_field = "<label>Value:</label><input type='text' name='additional_value[]' class='metadata_field'/>";
    $("#additional_metadata").append("<br><div class='metadata_pair'>"+key_field+value_field+"</div>");
  });
